angular.module("umbraco").directive("iconicIcon",function(){var n=function(n){n.$watch("icon",function(){n.template=n.package.overrideTemplate?n.package.backofficeTemplate.replace("{icon}",n.icon):n.package.template.replace("{icon}",n.icon)})},t=function(n,t){n.$watch("icon",function(){t.html(n.template);t.attr("title",n.icon)})};return{restrict:"E",scope:{icon:"=icon",package:"=package"},controller:n,link:t}});angular.module("umbraco").directive("packageForm",function(){var n=function(n,t,i){function r(t){i.localize(t).then(function(t){n.error=t.value})}function u(i,u,f){n.error=null;(!i.selector||i.selector.length<=0)&&(f(),r("iconicErrors_selector"));i.sourcefile||(i.sourcefile=i.cssfile);t.get(i.sourcefile).then(function(n){i.extractedStyles=[];for(var e=new RegExp(i.selector,"g"),t=e.exec(n.data);t!==null;)i.extractedStyles.push(t[1]),t=e.exec(n.data);i.extractedStyles.length>0?u():(r("iconicErrors_no_rules"),f())},function(){r("iconicErrors_loadingCss");f()})}n.submitPackageForm=function(){n.packageForm.$valid&&u(n.package,function(){n.analysing="success";n.onsaved()},function(){n.analysing="error"})}};return{restrict:"E",scope:{package:"=",onsaved:"&",oncancel:"&"},controller:n,templateUrl:"/App_Plugins/Iconic/Views/directives/package-form.html"}});